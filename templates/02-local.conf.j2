use security:get_htcondor_idtokens
{% if "SCHEDD" in condor_daemon_list %}
# Allow local users to submit jobs.  Since the only way to authenticate
# is with IDTOKENS (all of whose holders we trust) and FS (the local users),
# we can avoid writing things like *@$(HOSTNAME), which will fail if
# UID_DOMAIN is set (and introduces more opportunities for DNS to fail).
ALLOW_WRITE = $(ALLOW_WRITE) *
{% endif %}

{%- for daemon in condor_daemon_list %}
{% if ((daemon|lower == "centralmanager") or (daemon|lower == "central manager")) %}
use role:CentralManager
{% elif daemon|lower == "submit" %}
# Allow local users to submit jobs.  Since the only way to authenticate
# is with IDTOKENS (all of whose holders we trust) and FS (the local users),
# we can avoid writing things like *@$(HOSTNAME), which will fail if
# UID_DOMAIN is set (and introduces more opportunities for DNS to fail).
ALLOW_WRITE = $(ALLOW_WRITE) *
use role:Submit
{% elif daemon|lower == "execute" %}
use role:Execute
{% elif daemon|lower == "gangliad" %}
GANGLIA_SEND_DATA_FOR_ALL_HOSTS = TRUE
DAEMON_LIST = $(DAEMON_LIST) GANGLIAD
{% else %}
DAEMON_LIST = $(DAEMON_LIST) {{ daemon }}
{% endif %}
{% endfor %}
